{"ast":null,"code":"import _objectSpread from\"/Users/mbpa1502/Documents/kundaliweb/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/mbpa1502/Documents/kundaliweb/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/mbpa1502/Documents/kundaliweb/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/mbpa1502/Documents/kundaliweb/node_modules/@babel/runtime/regenerator/index.js\";import{useState}from\"react\";import{useClient}from\"./settings\";import{Grid,Button}from\"@material-ui/core\";// import MicIcon from \"@material-ui/icons/Mic\";\n// import MicOffIcon from \"@material-ui/icons/MicOff\";\n// import VideocamIcon from \"@material-ui/icons/Videocam\";\n// import VideocamOffIcon from \"@material-ui/icons/VideocamOff\";\n// import ExitToAppIcon from \"@material-ui/icons/ExitToApp\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Controls(props){var client=useClient();var tracks=props.tracks,setStart=props.setStart,setInCall=props.setInCall;var _useState=useState({video:true,audio:true}),_useState2=_slicedToArray(_useState,2),trackState=_useState2[0],setTrackState=_useState2[1];var mute=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(type){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(type===\"audio\")){_context.next=6;break;}_context.next=3;return tracks[0].setEnabled(!trackState.audio);case 3:setTrackState(function(ps){return _objectSpread(_objectSpread({},ps),{},{audio:!ps.audio});});_context.next=10;break;case 6:if(!(type===\"video\")){_context.next=10;break;}_context.next=9;return tracks[1].setEnabled(!trackState.video);case 9:setTrackState(function(ps){return _objectSpread(_objectSpread({},ps),{},{video:!ps.video});});case 10:case\"end\":return _context.stop();}}},_callee);}));return function mute(_x){return _ref.apply(this,arguments);};}();var leaveChannel=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return client.leave();case 2:client.removeAllListeners();tracks[0].close();tracks[1].close();setStart(false);setInCall(false);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function leaveChannel(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,alignItems:\"center\",children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:trackState.audio?\"primary\":\"secondary\",onClick:function onClick(){return mute(\"audio\");}})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:trackState.video?\"primary\":\"secondary\",onClick:function onClick(){return mute(\"video\");}})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"default\",onClick:function onClick(){return leaveChannel();},children:\"Leave\"})})]});}","map":{"version":3,"sources":["/Users/mbpa1502/Documents/kundaliweb/src/Controls.js"],"names":["useState","useClient","Grid","Button","Controls","props","client","tracks","setStart","setInCall","video","audio","trackState","setTrackState","mute","type","setEnabled","ps","leaveChannel","leave","removeAllListeners","close"],"mappings":"0eAAA,OAASA,QAAT,KAAyB,OAAzB,CACA,OAASC,SAAT,KAA0B,YAA1B,CACA,OAASC,IAAT,CAAeC,MAAf,KAA6B,mBAA7B,CACA;AACA;AACA;AACA;AACA;wFAEA,cAAe,SAASC,CAAAA,QAAT,CAAkBC,KAAlB,CAAyB,CACtC,GAAMC,CAAAA,MAAM,CAAGL,SAAS,EAAxB,CACA,GAAQM,CAAAA,MAAR,CAAwCF,KAAxC,CAAQE,MAAR,CAAgBC,QAAhB,CAAwCH,KAAxC,CAAgBG,QAAhB,CAA0BC,SAA1B,CAAwCJ,KAAxC,CAA0BI,SAA1B,CACA,cAAoCT,QAAQ,CAAC,CAAEU,KAAK,CAAE,IAAT,CAAeC,KAAK,CAAE,IAAtB,CAAD,CAA5C,wCAAOC,UAAP,eAAmBC,aAAnB,eAEA,GAAMC,CAAAA,IAAI,0FAAG,iBAAOC,IAAP,uHACPA,IAAI,GAAK,OADF,gDAEHR,CAAAA,MAAM,CAAC,CAAD,CAAN,CAAUS,UAAV,CAAqB,CAACJ,UAAU,CAACD,KAAjC,CAFG,QAGTE,aAAa,CAAC,SAACI,EAAD,CAAQ,CACpB,sCAAYA,EAAZ,MAAgBN,KAAK,CAAE,CAACM,EAAE,CAACN,KAA3B,GACD,CAFY,CAAb,CAHS,mCAMAI,IAAI,GAAK,OANT,iDAOHR,CAAAA,MAAM,CAAC,CAAD,CAAN,CAAUS,UAAV,CAAqB,CAACJ,UAAU,CAACF,KAAjC,CAPG,QAQTG,aAAa,CAAC,SAACI,EAAD,CAAQ,CACpB,sCAAYA,EAAZ,MAAgBP,KAAK,CAAE,CAACO,EAAE,CAACP,KAA3B,GACD,CAFY,CAAb,CARS,uDAAH,kBAAJI,CAAAA,IAAI,4CAAV,CAcA,GAAMI,CAAAA,YAAY,2FAAG,+JACbZ,CAAAA,MAAM,CAACa,KAAP,EADa,QAEnBb,MAAM,CAACc,kBAAP,GACAb,MAAM,CAAC,CAAD,CAAN,CAAUc,KAAV,GACAd,MAAM,CAAC,CAAD,CAAN,CAAUc,KAAV,GACAb,QAAQ,CAAC,KAAD,CAAR,CACAC,SAAS,CAAC,KAAD,CAAT,CANmB,wDAAH,kBAAZS,CAAAA,YAAY,2CAAlB,CASA,mBACE,MAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,OAAO,CAAE,CAAzB,CAA4B,UAAU,CAAC,QAAvC,wBACE,KAAC,IAAD,EAAM,IAAI,KAAV,uBACE,KAAC,MAAD,EACE,OAAO,CAAC,WADV,CAEE,KAAK,CAAEN,UAAU,CAACD,KAAX,CAAmB,SAAnB,CAA+B,WAFxC,CAGE,OAAO,CAAE,yBAAMG,CAAAA,IAAI,CAAC,OAAD,CAAV,EAHX,EADF,EADF,cAUE,KAAC,IAAD,EAAM,IAAI,KAAV,uBACE,KAAC,MAAD,EACE,OAAO,CAAC,WADV,CAEE,KAAK,CAAEF,UAAU,CAACF,KAAX,CAAmB,SAAnB,CAA+B,WAFxC,CAGE,OAAO,CAAE,yBAAMI,CAAAA,IAAI,CAAC,OAAD,CAAV,EAHX,EADF,EAVF,cAmBE,KAAC,IAAD,EAAM,IAAI,KAAV,uBACE,KAAC,MAAD,EACE,OAAO,CAAC,WADV,CAEE,KAAK,CAAC,SAFR,CAGE,OAAO,CAAE,yBAAMI,CAAAA,YAAY,EAAlB,EAHX,mBADF,EAnBF,GADF,CAgCD","sourcesContent":["import { useState } from \"react\";\nimport { useClient } from \"./settings\";\nimport { Grid, Button } from \"@material-ui/core\";\n// import MicIcon from \"@material-ui/icons/Mic\";\n// import MicOffIcon from \"@material-ui/icons/MicOff\";\n// import VideocamIcon from \"@material-ui/icons/Videocam\";\n// import VideocamOffIcon from \"@material-ui/icons/VideocamOff\";\n// import ExitToAppIcon from \"@material-ui/icons/ExitToApp\";\n\nexport default function Controls(props) {\n  const client = useClient();\n  const { tracks, setStart, setInCall } = props;\n  const [trackState, setTrackState] = useState({ video: true, audio: true });\n\n  const mute = async (type) => {\n    if (type === \"audio\") {\n      await tracks[0].setEnabled(!trackState.audio);\n      setTrackState((ps) => {\n        return { ...ps, audio: !ps.audio };\n      });\n    } else if (type === \"video\") {\n      await tracks[1].setEnabled(!trackState.video);\n      setTrackState((ps) => {\n        return { ...ps, video: !ps.video };\n      });\n    }\n  };\n\n  const leaveChannel = async () => {\n    await client.leave();\n    client.removeAllListeners();\n    tracks[0].close();\n    tracks[1].close();\n    setStart(false);\n    setInCall(false);\n  };\n\n  return (\n    <Grid container spacing={2} alignItems=\"center\">\n      <Grid item>\n        <Button\n          variant=\"contained\"\n          color={trackState.audio ? \"primary\" : \"secondary\"}\n          onClick={() => mute(\"audio\")}\n        >\n\n        </Button>\n      </Grid>\n      <Grid item>\n        <Button\n          variant=\"contained\"\n          color={trackState.video ? \"primary\" : \"secondary\"}\n          onClick={() => mute(\"video\")}\n        >\n\n        </Button>\n      </Grid>\n      <Grid item>\n        <Button\n          variant=\"contained\"\n          color=\"default\"\n          onClick={() => leaveChannel()}\n        >\n          Leave\n        \n        </Button>\n      </Grid>\n    </Grid>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}